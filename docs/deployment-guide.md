# Deployment Guide for ChatGPT-Google Dashboard

## Prerequisites

1. **Render Account**: Sign up at [render.com](https://render.com)
2. **GitHub Repository**: Push your code to GitHub
3. **API Keys**:
   - OpenAI API Key
   - Google Cloud Project with APIs enabled
   - Google OAuth credentials

## Step 1: Prepare for Deployment

### 1.1 Environment Variables

Ensure you have all required environment variables:

```env
OPENAI_API_KEY=sk-...
GOOGLE_CLIENT_ID=...
GOOGLE_CLIENT_SECRET=...
GOOGLE_API_CREDENTIALS=path_to_credentials.json
DATABASE_URL=postgresql://... (auto-generated by Render)
```

### 1.2 Update Frontend API URL

In `frontend/src/config.js`, update the API URL for production:

```javascript
export const API_BASE_URL = process.env.REACT_APP_API_URL || 
  (process.env.NODE_ENV === 'production' 
    ? 'https://your-backend-url.onrender.com/api' 
    : 'http://localhost:5000/api');
```

## Step 2: Deploy to Render

### 2.1 Using render.yaml (Recommended)

1. Push your code to GitHub
2. In Render Dashboard, click "New" → "Blueprint"
3. Connect your GitHub repository
4. Select the repository with `render.yaml`
5. Render will automatically create:
   - PostgreSQL database
   - Backend web service
   - Frontend static site

### 2.2 Manual Deployment

#### Create PostgreSQL Database

1. In Render Dashboard, click "New" → "PostgreSQL"
2. Name: `chatgpt-dashboard-db`
3. Select free tier
4. Click "Create Database"
5. Copy the connection string

#### Deploy Backend

1. Click "New" → "Web Service"
2. Connect your GitHub repository
3. Configuration:
   - Name: `chatgpt-dashboard-backend`
   - Root Directory: `backend`
   - Build Command: `npm install`
   - Start Command: `npm start`
4. Add environment variables:
   - `DATABASE_URL`: (from PostgreSQL)
   - `OPENAI_API_KEY`: Your OpenAI key
   - `GOOGLE_CLIENT_ID`: Your Google OAuth client ID
   - `GOOGLE_CLIENT_SECRET`: Your Google OAuth secret
   - `PORT`: 5000
5. Click "Create Web Service"

#### Deploy Frontend

1. Click "New" → "Static Site"
2. Connect your GitHub repository
3. Configuration:
   - Name: `chatgpt-dashboard-frontend`
   - Root Directory: `frontend`
   - Build Command: `npm install && npm run build`
   - Publish Directory: `build`
4. Add environment variable:
   - `REACT_APP_API_URL`: Your backend URL (e.g., `https://chatgpt-dashboard-backend.onrender.com/api`)
5. Click "Create Static Site"

## Step 3: Post-Deployment Setup

### 3.1 Initialize Database

Once the backend is deployed:

1. Go to the backend service in Render
2. Click "Shell" tab
3. Run: `npm run init-db`

### 3.2 Configure Google OAuth

1. Go to [Google Cloud Console](https://console.cloud.google.com)
2. Select your project
3. Go to "APIs & Services" → "Credentials"
4. Update your OAuth 2.0 Client ID:
   - Add authorized redirect URI: `https://your-backend-url.onrender.com/auth/google/callback`

### 3.3 Set Up Google Service Account (Optional)

For server-to-server authentication:

1. Create a service account in Google Cloud Console
2. Download the JSON credentials
3. In Render backend environment variables:
   - Set `GOOGLE_API_CREDENTIALS` to the JSON content (stringify it)

## Step 4: Verify Deployment

1. **Check Backend Health**:
   ```
   https://your-backend-url.onrender.com/api/health
   ```

2. **Access Frontend**:
   ```
   https://your-frontend-url.onrender.com
   ```

3. **Test Features**:
   - Create and manage tasks
   - Create and manage lists
   - Generate tasks with AI
   - Check Google services integration

## Troubleshooting

### Database Connection Issues

- Ensure `DATABASE_URL` includes `?ssl=true`
- Check if database is active in Render dashboard

### Frontend Can't Connect to Backend

- Verify `REACT_APP_API_URL` is set correctly
- Check CORS settings in backend
- Ensure backend is running

### Google APIs Not Working

- Verify API credentials are correct
- Check if required APIs are enabled in Google Cloud Console
- Ensure OAuth redirect URIs are configured

### Build Failures

- Check build logs in Render dashboard
- Ensure all dependencies are in `package.json`
- Verify Node.js version compatibility

## Monitoring

1. **Render Dashboard**: Monitor service health and logs
2. **Error Tracking**: Consider adding Sentry or similar
3. **Analytics**: Add Google Analytics to frontend

## Scaling

When ready to scale:

1. Upgrade PostgreSQL plan for better performance
2. Enable auto-scaling for backend service
3. Add CDN for frontend static assets
4. Implement caching strategies

## Security Best Practices

1. **Environment Variables**: Never commit sensitive data
2. **API Keys**: Rotate regularly
3. **Database**: Enable SSL, use strong passwords
4. **CORS**: Configure for your specific domains
5. **Authentication**: Implement JWT tokens for user sessions

## Backup Strategy

1. **Database**: Enable automatic backups in Render
2. **Code**: Use Git tags for releases
3. **Data Export**: Implement data export functionality

---

For more help, check:
- [Render Documentation](https://render.com/docs)
- [PostgreSQL on Render](https://render.com/docs/databases)
- [Google Cloud Documentation](https://cloud.google.com/docs)